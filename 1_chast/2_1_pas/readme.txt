Перед тем, как изучать данный файл, ознакомься с программой!!!

Например, берём последовательность 978654231
Идём справа налево -> 

	a = 97865423
НАЧАЛО ЦИКЛА
	N = 978654231
Если (3 > 1)
	flag = 1;
(else само собой пропускается)
	N = 97865423
	a = 9786542
СЛЕД. ЦИКЛ 
Если (2 > 3) (Что неверно => идём в else: )
(Т.к. условие неверно, то)
	flag = 0;
	Останавливаем цикл while с помощью break, т.к. условие уже не выполнилось
Завершение программы

Если бы мы использовали твою программу, то у нас бы в данном случае flag всегда бы оставался = 1
И программа бы выдавала неверный результат. 
Так что обязательно необходимо добавить:

 else    
    begin  
      flag := 0; 
      break;  
    end;

УДАЧИ!!!